# Телеграмм бот конвертор в пдф
review branch 
# ИКР - идеальный конечный результат

Хотим, что бы БОТ делал PDF файлы
из форматов txt, word (xls, xlsx), excel (doc, docx),
Добавим формат фото .webp? очень часто в сети встречается

# Правила работы с репозиторием

1. Для того что бы написать свою фичу делаем новую ветку от main
2. Если ветка была создана и прошел успешный мердж, ветку удаляем и заново делаем ответвление от main
3. Не сливаемся в main не проверив работоспособность и не делаем слива единолично - проводим слияние совместно за ветку
   main отвечает ShadowGreg
4. Проверяем остальные ветки на обновление - возможно на соседней прикатится более новое и что-то придется менять

# 1. Описание модулей

* bot.py - функционал взаимодействия с телеграм-ботом
* converters.py - все функции для конвертирования файлов + вспомогательные функции
* data_base.py - реализация работы с sqlite (он остался в неизменном виде)
* messages.py - константы с сообщениями от бота
* utils.py - функции для работы с файловой системой
* main.py - точка входа

# 2. Расшарить права на БОТа

# 3. Уникальная идентификация файлов пользователей

В имя сохраняемого файла идентификатор пользователя - сделано

+ время сохранения - сделано
+ ознакомьтесь - потом надо протестить одновременную
  работу [https://stackoverflow.com/questions/64022228/python-telebot-not-working-with-different-users] (возможное
  решение)

# 4. Нужно файл main что бы он мог конвертировать разные входящие файлы

т.е. добавить функцию, которая будет распозновать расширение файла
если txt - брать в работу convert_text_to_pdf
если не txt - что то другое

# 5. Методы работы с txt выделить в отдельный файл
- готово
# 6. лог файл ошибок

придумать лог файл ошибок - будет ли он работать удалённо? 
# 7. тестирование
## check-list
[Check-list](https://docs.google.com/spreadsheets/d/1ZcLOYGYTrBpCamewE_iFhbuU2kZe5IdxOmcHBWc8Uxs/edit#gid=0)


# 8. Запуск в контейнере
Для запуска приложения в докере необходимо установить docker-compose:  
``` shell
apt update  
apt install docker-compose  
```

Далее нужно скопировать файл .env_example в .env и вписать туда токен своего бота.
```
TG_TOKEN=PLACE_YOUR_TOKEN_HERE
```

Далее с помощью docker-compose собираем образ и запускаем контейнер:  
``` shell
docker-compose up --build  
```

При наличии ошибки на отсутствие доступа, добавить текущего пользователя в группу docker:  
``` shell
sudo gpasswd -a $USER docker
newgrp docker  
```

Для возможности редактирования и удаления файлов в корневой папке проекта выполнить:  
``` shell
sudo chown -R alex:alex *
```
Где alex:alex - ваш username в Linux